let cll=null,fastRender=!1,shT,pg,pg2,ut,fm,gcfg,icfg,aset,flH,flW,rWH,unt,sLn,lLn,hsl,hll,hW,hH,scp,scpl,frmW,frmC,pmh,stkH,stkM,phs,rndT;function preload(){shT=new p5.Shader(this._renderer,sCV,sTF)}function gfm(){var t,s,i,r,e,h;return void 0!==fm?fm:((t=new Ft("Palette")).aO("Deep #78","Deep #78").aO("Deep #78 (Inversion)","Deep #78 (Inversion)").aO("Fallen Leaves","Fallen Leaves").aO("Deep Thanks #3","Deep Thanks #3").aO("Deep Thanks #3 (Inversion)","Deep Thanks #3 (Inversion)").aO("Deep #23","Deep #23").aO("Deep #23 (Inversion)","Deep #23 (Inversion)").aO("Be No.18","Be No.18").aO("Sunset","Sunset").aO("Sunset (Inversion)","Sunset (Inversion)").aO("Daytime Meteors","Daytime Meteors").aO("Be No.22","Be No.22").aO("September Sky","September Sky").aO("The Lament for Icarus","The Lament for Icarus").aO("Cattle Watering by a Stream","Cattle Watering by a Stream").aO("Avenida Paulista no dia da inauguração, 8 de dezembro de 1891","Avenida Paulista no dia da inauguração, 8 de dezembro de 1891").aO("The Valley of Lauterbrunnen, Switzerland","The Valley of Lauterbrunnen, Switzerland").aO("Landscape By Water","Landscape By Water").aO("The Swing","The Swing").aO("L'Île Lacroix, Rouen","L'Île Lacroix, Rouen").aO("Diana and Endymion","Diana and Endymion"),(s=new Ft("Texture")).aO("Canvas",0).aO("Wood",4),(i=new Ft("Main shape")).aO("Circle",1).aO("Square",2).aO("Hexagon",3).aO("Diamond",2.5,.03),(r=new Ft("Splotch shape")).aO("Spot",1).aO("Splash",2).aO("Drip",3),(e=new Ft("Scope")).aO("Close",1).aO("Normal",2),(h=new FM).af(t).af(s).af(i).af(r).af(e),h)}function setup(){ut.sS();var t=color("#DDD6CD"),s=[2,3];rWH=s[0]/s[1];let i=window.innerWidth,r=i/rWH;var s=void 0!==window.alba&&window.alba.params.isRenderer,e=parseInt(ut.gUP("ll"));Number.isInteger(e)&&2<=e?(r=e,i=r*rWH):!s&&r>window.innerHeight&&(r=window.innerHeight,i=r*rWH),s&&(fastRender=!0),ut.iTE()&&(i*=.75,r*=.75),0!=i%2&&--i,0!=r%2&&--r,cll=max(i,r),rWH<=1?(flH=cll,flW=flH*rWH):(flW=cll,flH=flW/rWH),ut.sWH(flW,flH),i=round(i),r=round(r);createCanvas(i,r,WEBGL).touchEnded(oTE),colorMode(HSB),hW=flW/2,hH=flH/2,sLn=min(flW,flH),lLn=max(flW,flH),hsl=min(hW,hH),hll=max(hW,hH),scp=fm.gFV("Scope"),scpl=350+150*(scp-1),unt=lLn/scpl;var e=ut.gHh(),s=(gcfg={svFN:e,shF:!1,shTt:!0},width),e=height,s=(pg=ut.cPg(s,e,WEBGL),pg2=ut.cPg(s,e,WEBGL),noStroke(),fill(t),rect(-hW,-hH,width,height),pg.fill(t),pg.noStroke(),pg.rect(-hW,-hH,width,height),stkH=new SH,paletteName=fm.gFV("Palette"),palettes=new Palettes,phs=palettes.gH(paletteName),frmW=.024*sLn,frmC="#FDF8F2",{bSN:[150,1],bDN:[30,.025],cNM:1,clN:[5,.01],tense:-3,dim:.95,stC:SQUARE,evn:.5,nSS:15*unt,bSS:100*unt,bCSS:100*unt,tl:[5,1],dPF:.5}),e=gnO(ut.pO([0,.25,.382,.5,.618,.72,.8])*hll),t=1.2*hsl,h=105*unt,h=ut.rd(h,t),t=fm.gFV("Main shape"),e=(icfg={orn:e,iOR:h,iIR:0,meA:s,bSS:s.bSS,bCSS:s.bCSS,nSS:s.nSS,pCM:ut.pO([1,2]),dim:s.dim??.9,txt:fm.gFV("Texture"),aST:s.tl,stD:[5,0],bDNR:10,spSN:t,stCA:HALF_PI-(PI-TWO_PI/(2*t))/2},aset={sPF:fastRender?0:.2,dPF:s.dPF},(pmh=new PMH).gM());(stkM=new StM(e)).shift()}function gnO(t){for(;;){var s=ut.rd(0,TWO_PI),s=ut.cP(createVector(0,0),t,s);if(!ut.iOC(s,.72*flW,.72*flH))return s}}class PMH{constructor(){this.bSP=[]}init(){this.map=[],this.lA=[],this.oA=[],this.fICC=!1;var s=[];for(let t=0;t<16;t+=1)ut.iNB(icfg.spSN,2,2.5,!0)&&2==t%4||1<=rWH&&[0,8].includes(t)||s.push(QUARTER_PI/2*t);this.sA=ut.pO(s);var t={iRt:!0,zI:pow(2,10),cn:icfg.orn,tr:icfg.initTracks,phs:phs,iR:icfg.iIR,oR:icfg.iOR,sA:this.sA,dA:PI*ut.rdS(),aNR:ut.rd(0,1e4),or:1};this.iNLA(t)}cB(){var s=this.bCCC,i=ut.r4(2*lLn*1.414);let r=phs[0].pOC();this.bgC=[];for(let t=0;t<2;t+=1){var e=s.sA+PI*t,h=createVector(cos(e),sin(e)).normalize(),e=(createVector(cos(e+HALF_PI),sin(e+HALF_PI)).normalize(),s.cn.copy().add(h.copy().mult(i/2)),s.cn.copy().add(h.copy().mult(-i/2)),phs[0].pODC(r));this.bgC[t]=e,r=e,ut.rd(0,1e4),icfg.meA.bSN,icfg.bSS,0}}aS(){var u=this.bCCC,r=[],n=max(.6*u.oR,.5*hsl),e=max(.6*this.orA.oR,.5*hsl),t=round(240*pow(scpl/350,1)*(lLn*sLn/sq(350*unt)-sq(n/unt/350)*PI)),t=ut.clp(t,120,300);for(let i=0;i<t;i+=1){let t,s;for(;;){s=i<4?2*(i+1)*unt:(h=pow(ut.rd(),.5),s=map(h,0,1,n,1.4*lLn)-ut.rdG(0,10*unt),max(10*unt,s));var h=ut.rd(0,TWO_PI);if(t=ut.cP(u.cn,s,h),!ut.iOC(t,1.05*flW,1.05*flH)&&!(4<=i&&t.dist(this.orA.cn)<e))break}r.push(t)}let s=color("black");var i=phs[0].pCs(4),c=fm.gFV("Splotch shape");for(let o=0;o<r.length;o+=1){var l=r[o],C=o<4?0:ut.pO([3,4]),C=o<4?color(i[o]):phs[C].pODC(s),f=l.dist(u.cn),f=ut.rdG(1500*unt*unt/f,10*unt,5*unt);if(s=C,o<4&&0!=o){var d=(90+30*o)*unt,d={type:"big",id:-998,cn:l,color:C,sA:ut.rd(0,TWO_PI),dA:ut.rdS()*TWO_PI*1.1,radius:ut.rd(90,120)*unt*o,stS:d,enS:30*unt,sdS:0,tl:[5,1],arcNoise:[5,10]};this.map.push(["gAS",1,d])}else{let t=l,s,i,r,e,h,a;if(1===c)s=l,i=f,r=f,h=[80,2.5],a=.65;else if(2===c)s=l,i=.5*f,r=.5*f,h=[75,50],a=.85;else if(3===c){d=createVector(0,1).mult(10*f);if(s=l.copy().add(d),4<=o&&ut.rdT(.9)&&(ut.iSAI(t,s,u.cn,.8*u.oR,0,TWO_PI)&&(t=l.copy().sub(d),s=l),ut.iSAI(t,s,u.cn,.8*u.oR,0,TWO_PI)||t.dist(u.cn)<n&&s.dist(u.cn)<n))continue;i=ut.rdG(5,.5,3)*unt,r=i,h=[80,2.5],a=.55,e=[5,.5]}4<=o&&C.setAlpha(a);C={type:"spot",id:o<4?-998:1e5,color:C,stP:t,enP:o<4?l:s,stS:o<4?f:i,enS:o<4?f:r,stNR:ut.rd(0,1e4),straightNoise:void o,bSN:h,tl:o<4?void 0:e,cap:ROUND,oF:0===o};this.map.push(["cLS",1,C])}}}aF(){var h=this.bCCC,s=[];for(let t=0;t<this.vC.length;t+=1){var i=this.vC[t];i.x===h.cn.x&&i.y===h.cn.y||(i=ut.r4(ut.adA(atan2(i.y-h.cn.y,i.x-h.cn.x))),s.push(i))}var r=[...new Set(s)];r.sort((t,s)=>t-s),r.push(r[0]+TWO_PI);let e=HALF_PI,a=ut.adA(h.sA+h.dA/2);for(let t=1;t<r.length;t+=1){var o=r[t]-r[t-1];ut.iNB(o,HALF_PI,PI)&&o>e&&(e=o,a=ut.adA((r[t]+r[t-1])/2))}var t=[a,a+PI],u=[.9*e,.9*PI];for(let e=0;e<t.length;e+=1){var n=t[e],c=(8-scp)/5*.12*pow(60*unt/h.oR,.381);ut.rdS();let i=h.oR*min(1.1,125*unt/h.oR)*(1-.05*(3-scp));var l=1.5*h.oR;let r=l;for(;0<r;){var C=ut.rdG(5,.5)*unt;r-=C,i+=C;let t=u[e],s=n-t/2;for(var f=i/h.oR;0<t;){var d,S,A,g,p,v,m,D=ut.rdG(5,.5)*unt,F=ut.rdT(.2)?2.5:1,b=D*F,B=b/i;s+=B,t-=B,ut.rd()>c||(p=s+B/2,m=pow(f,2)*+h.oR,(m=ut.cP(h.cn,m,p)).x+=15*(2*noise(m.x/sLn*20)-1)*unt*pow(f,3),m.y+=15*(2*noise(m.y/sLn*20)-1)*unt*pow(f,3),v=ut.rdG(0,.381)*QUARTER_PI*pow(f,2),b=.5*b*pow(f,1.5),d=1<F?ut.rd(2/F,1.5):1,S=1<F?ut.rd(2/F,1.5):1,A=ut.pO([-1,0,1]),g=ut.cP(m,b/2,p+HALF_PI+v),b=ut.cP(m,b/2,p+HALF_PI+v+PI),abs(1<rWH?m.x/flW:m.y/flH),(p=(1<F?phs[4]:phs[3]).pOC()).setAlpha(.8),m={type:"frag",id:2e5,color:p,stP:g,enP:b,stS:D*(v=map(r,l,0,.5,1.5))*d,enS:D*v*S,side:A,stNR:ut.rd(0,1e4),bSN:icfg.meA.bSN,bDN:[10,0]},this.map.push(["cRA",1,m]),s+=B,t-=B)}}}}aCTM(t){this.map.push(["cCC",1,t]),t.isInnerCircles&&(this.fICC=!0),this.oA.push(t)}iNLA(t){t.id=this.lA.length,t.fICC=this.fICC;t=new LA(t);this.lA.push(t)}gLC(t,s,i){this.lA[0],t.grow(),t.gSP()}cD(){ut.cA(this.map),ut.cA(this.lA)}rs(){this.cD()}aD(){for(let t=0;t<this.lA.length;t+=1)if(!this.lA[t].hD())return!1;return!0}sM(){for(let t=0;t<this.bSP.length;t+=1)this.map.push(["cRA",1,this.bSP[t]]);this.lA.sort((t,s)=>s.oR-t.oR);var s={};for(let t=0;t<this.lA.length;t+=1)s[this.lA[t].id]=t;for(let t=0;t<this.map.length;t+=1){var i=this.map[t][2],r=s[i.id]??i.id,e=i.subId??0,h=i.zIndexBias??0;i.zI=100*r+10*h+e}this.map.sort((t,s)=>t[2].zI-s[2].zI)}op(){return this.map}sKA(){let s,i,r=1/0;for(let t=0;t<this.oA.length;t+=1){var e,h=this.oA[t];0===h.id&&0===h.step&&(s=h),ut.iOC(h.cn,.6*flW,.6*flH)||h.oR<45*unt||h.iR>icfg.iIR||h.iLT||h.tr<=3||(e=h.cn.mag())<r&&(i=h,r=e)}return i=i??s,this.orA=s,this.bCCC=i}it(){this.init();let t=0;do{var s=this.lA.length;for(let t=0;t<s;t+=1){var i=this.lA[t];if(!i.hD()){this.gLC(i);var r=i.gSP();for(let t=0;t<r.length;t+=1)this.aCTM(r[t]);var e=i.gNP();for(let t=0;t<e.length;t+=1)this.iNLA(e[t])}}}while(!this.aD()&&(50===(t+=1)&&(t=0,print("maxIteration 50 times reached.")),t<=50))}gM(){rndT=0;let t=!1;for(;!t&&rndT<3e4;)rndT+=1,t=!0,this.it(),!(t=this.cC()?t:!1)&&rndT<3e4&&this.rs();return this.sKA(),this.cB(),this.aS(),this.aF(),this.sM(),this.op()}cC(){var s=[],i={0:[],1:[],2:[],3:[],4:[]},r={0:[],1:[],2:[],3:[],4:[]},e={},h=[],a=[];let o=0,u=0;for(let t=0;t<this.oA.length;t+=1){var n=this.oA[t],c=n.cn.array().toString();if(!(n.oR<40.5*unt)&&(!ut.iOC(n.cn,1.05*flW,1.05*flH)&&!h.includes(c))){h.push(c),a.push(n.cn);var c=n.cn,l=ut.iOP(c)?NaN:atan2(c.y,c.x),c=c.mag()+n.oR,n=isNaN(l)?0:ut.r4(c*cos(l)),c=isNaN(l)?0:ut.r4(c*sin(l));o+=n,u+=c;let t=0;0<n&&0<=c?t=1:n<=0&&0<c?t=2:n<0&&c<=0?t=3:0<=n&&c<0&&(t=4),s.push(t),i[t].push(n),r[t].push(c),e[t]=e[t]?e[t]+1:1}}var t,C=s.reduce((t,s)=>(t[s]=t[s]?++t[s]:1,t),{}),C=(this.vC=a,Object.values(C).sort((t,s)=>s-t));if(3<=C[0]/C[1])return!1;for(t in e)if(3<e[t])return!1;var C=[...new Set(h)],f=scp+2,d=4*scp;if(4===C.length)return!1;if(!ut.iNB(C.length,f,d,!0))return!1;if(1<=rWH){if(!s.includes(1)&&!s.includes(4))return!1;if(!s.includes(2)&&!s.includes(3))return!1}else{if(!s.includes(1)&&!s.includes(2))return!1;if(!s.includes(3)&&!s.includes(4))return!1}var S,f=+C.length/3;return!(1<=rWH&&abs(o)>hW*f||rWH<1&&abs(u)>hH*f||(d=ut.calRMS(i[0])+ut.calRMS(i[1])+ut.calRMS(i[2])+ut.calRMS(i[3])+ut.calRMS(i[4]),C=ut.calRMS(r[0])+ut.calRMS(r[1])+ut.calRMS(r[2])+ut.calRMS(r[3])+ut.calRMS(r[4]),S=3.33*(f=1.8*pow(scpl/350,1.1)),1<=rWH&&!ut.iNB(d,hW*f,hW*S))||rWH<=1&&!ut.iNB(C,hH*f,hH*S))}}class StM{constructor(t){this.map=t,this.cts=ut.cO(t),this.dn=!1}sCSA(t){var s=icfg.meA;t.sCl(t.color).sBSN(...s.bSN).sBDN(s.bDN[0],s.bDN[1]*icfg.bDNR).sCNM(s.cNM).sCN(...s.clN).sTn(s.tense).sE(s.evn??1).sSC(s.stC).sSPF(aset.sPF)}cCC(t,s,i){var r=i.tr,e=i.iR??0,h=(i.oR,i.tWs),a=i.sA??ut.rd(0,TWO_PI),o=i.dA??TWO_PI,u=icfg.dim,n=-.5*u;let c;for(let t=0;t<r;t+=1){var l=0<i.or?t:r-1-t,C=i.cls&&i.cls[l]?i.cls[l]:i.paletteHandler.pODC(c),f=(c=C,h.slice(0,l+1).reduce((t,s)=>t+s,e)),d=i.stS??h[l],S=min(d,i.maxStrokeSize??icfg.nSS),A=ceil(ut.r4(d/(S*u))),g=1===A?0:ut.r4((d-S+S*(1-u))/(A-1));for(let t=0;t<A;t+=1){var p=f-g*(i.or<0?t:A-t-1),v=p+(.5+n)*S,m=p+(n-.5)*S,D=i.arcNoise??icfg.stD,F=[D[0],pow(ut.rd(1,.3,.1,1),p/unt/100)*D[1]],b=i.aST??icfg.aST,b=[b[0],pow(ut.rd(0,1),.382)*b[1]],B=o*(1+random(-1,1)*D[1]/300),R=i.cn,D=a+(o-B)/2+B*random(-1,1)*D[1]/300;ut.iASIC(R,m,v,D,o)&&(m={color:C,cn:R,radius:p,size:S,sdS:n,sA:ut.adA(D),dA:B,aNR:i.aNR,arcNoise:F,tl:b},["big"].includes(i.type)?(m.arcNoise[1]*=10,this.gAS(l,s,m)):1===icfg.spSN?this.gAS(l,s,m):(v=(0<i.smS?floor:ceil)(icfg.spSN),this.gMS(m,v)))}}}gAS(t,s,i){var r=i.stS??i.size,e=i.enS??i.size,h=i.stR??i.radius,a=i.enR??i.radius,o=new ArcS;o.sT(pg).sCl(i.color).sAC(i.cn).sR(h,a).sSz(r,e).sSS(i.sdS??0).sSA(i.sA).sDA(i.dA),this.sCSA(o),void 0!==i.aNR&&o.sANR(i.aNR),void 0!==i.arcNoise&&o.sAN(...i.arcNoise),void 0!==i.tl&&o.sTl(...i.tl),stkH.qS(o)}gMS(s,i){var r=s.dA/i,e=Math.sign(s.dA),h=-1*e*icfg.stCA;for(let t=0;t<i;t+=1){var a=s.sA+r*t,o=s.sA+r*(t+1),a=ut.cP(s.cn,s.radius,a),o=ut.cP(s.cn,s.radius,o),u=new LnS;u.sT(pg).sCl(s.color).sP(a,o).sSz(s.size).sSS(s.sdS*e*0).sSNR(s.aNR).sSN(...s.arcNoise).sTl(...s.tl),this.sCSA(u),u.sSC(u.stC,h,-h),stkH.qS(u)}}cLS(t,s,i){var r=new LnS;r.sT(pg).sCl(i.color).sSz(i.stS,i.enS).sSS(i.sdS??0).sP(i.stP,i.enP),this.sCSA(r),void 0!==i.bSN&&r.sBSN(...i.bSN),void 0!==i.bDN&&r.sBDN(...i.bDN),void 0!==i.straightNoise&&r.sSN(...i.straightNoise),void 0!==i.tl&&r.sTl(...i.tl),void 0!==i.cap&&r.sSC(i.cap),!0===i.oF&&r.sOF(),stkH.qS(r)}cRA(t,s,i){var r=i.color??i.paletteHandler.pOC(),e=i.stS??i.size,h=i.enS??i.size,a=max(e,h),o=min(a,i.maxStrokeSize??icfg.nSS),u=0===ut.r4(o-a)?1:icfg.dim,n=ceil(ut.r4(a/(o*u))),c=1===n?0:ut.r4((a-o+o*(1-u))/(n-1)),l=p5.Vector.sub(i.enP,i.stP),C=createVector(-1*l.y,l.x).normalize().mult(i.side*c),f=e/a,d=h/a;let S=i.straightNoise??[.2,.5];void 0!==i.torward&&(S=icfg.stD);for(let t=0;t<n;t+=1){var A=C.copy().mult(t*f),A=i.stP.copy().add(A),g=A.copy().add(C.copy()),p=C.copy().mult(t*d),p=i.enP.copy().add(p),v=p.copy().add(C.copy());ut.iROC(A,p,v,g)||("bg"===i.type&&this.sGS(g,v,A,p),(g=new LnS).sT(pg).sCl(r).sSz(o*f,o*d).sSS(.5*i.side*u).sP(A,p).sCN(1,.05).sSNR(i.stNR).sSN(...S).sTl(0,0),this.sCSA(g),void 0!==i.bSN&&g.sBSN(...i.bSN),void 0!==i.bDN&&g.sBDN(...i.bDN),stkH.qS(g))}}sGS(t,s,u,n){let c=ut.gE(),l=p5.Vector.sub(n,u);function i(t,s,i,r,e,h,a){var o=h*min(h*t[r],h*s[r]);h*o>h*c[e]&&(h=(c[e]-o)/(i[r]-t[r]),e=l.copy().normalize().mult(-5*unt*a),t.add(l.copy().mult(a*h)).add(e),s.add(l.copy().mult(a*h)).add(e),l=p5.Vector.sub(n,u))}i(u,t,n,"y","top",-1,1),i(n,s,u,"y","top",-1,-1),i(u,t,n,"y","bottom",1,1),i(n,s,u,"y","bottom",1,-1),i(u,t,n,"x","left",-1,1),i(n,s,u,"x","left",-1,-1),i(u,t,n,"x","right",1,1),i(n,s,u,"x","right",1,-1)}shift(){if(!this.dn){for(let t=0;t<this.cts.length;t+=1){var s,i,r,e=this.map[t][0];if(0!==this.cts[t][1])return s=this.map[t][1],i=this.map[t][2],r=s-this.cts[t][1],--this.cts[t][1],void this[e](r,s,i)}this.dn=!0}}}function draw(){void 0!==stkH.crS&&!stkH.crS.iF()||stkM.shift();stkH.draw({sPF:aset.sPF,dPF:aset.dPF}),sCI(),stkM.dn&&stkH.aF()&&(noLoop(),tF(!0),ut.pvF())}function sCI(){aTS(),noStroke(),image(pg2,-width/2,-height/2,width,height)}function aTS(){var t=pg2,s=(t.shader(shT),gcfg.shF),i=gcfg.shTt,r=stkH.gO();shT.setUniform("uUL",lLn/500),shT.setUniform("uImg",r),shT.setUniform("uSize",[r.width,r.height]),shT.setUniform("uFW",frmW),shT.setUniform("uFC",ut.cTSC(frmC)),shT.setUniform("uTt",icfg.txt),shT.setUniform("uRS",ut.gRS()),shT.setUniform("uSF",s),shT.setUniform("uST",i),t.noStroke(),t.rect(-r.width/2,-r.height/2,r.width,r.height)}function keyPressed(){32===keyCode?(isLooping()?noLoop:loop)():83===keyCode?saveAsPng():70===keyCode?tF():84===keyCode?tT():38===keyCode?aset.sPF=max(0,ut.r4(aset.sPF-.2)):40===keyCode?aset.sPF=aset.sPF+.2:72===keyCode&&rWP("ll",4096/pixelDensity())}function tF(t){gcfg.shF=!!t||!gcfg.shF,isLooping()||sCI()}function rWP(t,s){var i=new URL(window.location.href);i.searchParams.set(t,s),location.href=i.href}function oTE(){var t;ut.iTE()&&(t=createVector(mouseX-hW,mouseY-hH),(ut.iOC(t,.8*width,.8*height)&&!ut.iOC(t,width,height)?tF:stkH.aF()?saveAsPng:tS)())}function tT(){gcfg.shTt=!gcfg.shTt,isLooping()||sCI()}function tS(){0<aset.sPF?aset.sPF=0:aset.sPF=.2}function saveAsPng(){saveCanvas(gcfg.svFN,"png")}let sCV=`
precision highp float;attribute vec3 aPosition;attribute vec2 aTexCoord;uniform mat4 uModelViewMatrix,uProjectionMatrix;varying highp vec2 vTexCoord;void main(){vec4 b=vec4(aPosition,1);gl_Position=uProjectionMatrix*uModelViewMatrix*b,vTexCoord=aTexCoord;}
`;class Palettes{constructor(){this.ps={"Deep #78":{group0:["#022332","#3D6571","#9FA088","#D5C6A5"],group1:["#003241","#255564","#3B687F","#567E82","#657571","#748075","#969981","#C5B896","#DED2B7","#F7E9CF"],group2:["#000205","#144F63","#EAD9BB","#FDF7ED"],group3:["#F8EDDE","#F2E4CB","#E4D3B4"],group4:["#5F7777","#6F827C","#8A9181"]},"Deep #78 (Inversion)":{group0:["#ffe6db","#f9d0be","#605f77","#2a395a"],group1:["#fddccd","#daaa9b","#c49780","#a9817d","#B2A4A1","#9a8a8e","#8b7f8a","#69667e","#3a4769","#2F3E5F"],group2:["#DEC1B9","#FFEBE0","#454E6D","#263457"],group3:["#FFC6B3","#FDC2B0","#FECBBA"],group4:["#555976","#5C5D79","#616179"]},"Fallen Leaves":{group0:["#6D003A","#AF3B47","#FCC587","#F8CACD"],group1:["#630C19","#96102E","#C2384B","#F48877","#F5D1D3","#F4E3F1","#FAB79E","#F1AA5D","#FFCD7E","#FFE69C"],group2:["#501C22","#A7274F","#FEEBAB","#FEEEEF"],group3:["#B32C5A","#EB6E84","#FBA9A9"],group4:["#F5AA4E","#FDE54A","#FEEBA6"]},"Deep Thanks #3":{group0:["#1D5164","#719778","#F0B374","#ECDAB4"],group1:["#123C3B","#095D5C","#03776E","#0A887C","#69482E","#C57445","#E9A858","#B19A6C","#DEC190","#F6DFBD"],group2:["#534230","#464236","#E2D4A7","#FFEFDB"],group3:["#F7A262","#F1CD97","#FBE8CA"],group4:["#417343","#629656","#94AB6A"]},"Deep Thanks #3 (Inversion)":{group0:["#96B0C9","#A07CA4","#FDD5CB","#EB8F95"],group1:["#3F5585","#84A5C7","#A1C7DB","#695E8D","#9F8FAD","#CDA6C2","#F2B5B2","#FFCAB6","#F2D7CC","#F8EBE4"],group2:["#193878","#0C2249","#CEE1E7","#F5EEE8"],group3:["#86578B","#784774","#5E3665"],group4:["#6D2F4E","#B74958","#E05668"]},"Deep #23":{group0:["#464759","#76799A","#E8C9AD","#FEE8D1"],group1:["#4E5260","#536981","#636B82","#919891","#7C95A7","#8DA2AC","#AAA993","#CCC9B0","#D7D6BC","#D3DBC7"],group2:["#E6E7D4","#D4CDB3","#596A78","#393B34"],group3:["#FADFC4","#F9C3AC","#B59095"],group4:["#354A58","#545A6D","#958694"]},"Deep #23 (Inversion)":{group0:["#DFDBD2","#ABBDBE","#1A3A61","#647AA3"],group1:["#E4D9DA","#C7D3D3","#D7C5BB","#ADA5A3","#AE9C90","#8B9B8B","#68817D","#6E84AB","#6C6E85","#40465E"],group2:["#383C55","#2b324c","#c6c4cb","#DBCAC0"],group3:["#6B9094","#8BAAA7","#C4CFC1"],group4:["#386575","#26526B","#1C485C"]},"Be No.18":{group0:["#987DB5","#DEACC9","#ACC4D2","#F1EFF0"],group1:["#69709A","#898AAE","#C8CADF","#41405F","#95749E","#DEC5DF","#DFB8C3","#F8E0ED","#BE82AF","#CDDBDE"],group2:["#825D88","#56427D","#D2E2EA","#D7D6DC"],group3:["#D7918A","#EC9F81","#FEB18D"],group4:["#576976","#7795A7","#92ADB7"]},Sunset:{group0:["#42505F","#5E3B4A","#B8C3A0","#FBCFA3"],group1:["#020333","#2E1F3C","#4F3A47","#614C53","#9B6D5C","#BA9571","#E9BD92","#F4D6A7","#3A5964","#9EB597"],group2:["#303748","#532E3A","#F9F1B0","#E4F0D2"],group3:["#FAF3B9","#F8F1B7","#F7E1A5"],group4:["#AEC7A7","#80AB93","#4F736D"]},"Sunset (Inversion)":{group0:["#FDEDC4","#a1c4b5","#5D7098","#0F3F67"],group1:["#F2EAC5","#d1e0c3","#b0c5b8","#9eb3ac","#6492a3","#41618F","#2A4265","#c5a69b","#7F5972","#574261"],group2:["#DBD1AE","#E7EBC6","#123A67","#042455"],group3:["#EAC4B1","#D8A69F","#B58281"],group4:["#513858","#7f546c","#6B4761"]},"Daytime Meteors":{group0:["#7C667E","#E3CAC3","#0B040B","#D2AC7A"],group1:["#5F4141","#723733","#7D4541","#996451","#CCA979","#DDC685","#E9D8AE","#A48A99","#CBB5BA","#DDC9C8"],group2:["#52242E","#925E51","#ECDFAB","#EFDFD0"],group3:["#D0B66C","#DDCA7C","#E7D998"],group4:["#57405D","#745E76","#957E8E"]},"Be No.22":{group0:["#3A6E9B","#7BA0BC","#BBCBD9","#E8E2E4"],group1:["#111A29","#748092","#A19F9F","#C1B7C1","#D7D3D7","#283B58","#455184","#3E6B8F","#8197B9","#BBC2DF"],group2:["#444D64","#455184","#AEC4DD","#DBD9DB"],group3:["#374192","#7379B1","#A9ADD7"],group4:["#577E8D","#70959E","#86A3AA"]},"September Sky":{group0:["#D7C6C8","#B4A3B6","#8F7D9F","#5A5177"],group1:["#403555","#4E476D","#6C5E7A","#7B6C8D","#98899F","#B8A5B1","#D7C6C8","#965965","#AA606D","#B48189"],group2:["#5A5177","#AD7986","#BAAAB6","#D6C6C9"],group3:["#423E60","#9B83A3","#DBC8CC"],group4:["#A75B6A","#B17888","#CBB3B6"]},"The Lament for Icarus":{group0:["#67392B","#7A4A31","#AA8052","#E6C697"],group1:["#34231C","#503023","#6F472C","#7D4E34","#8E6139","#915D34","#5A3D2C","#76553D","#D1B07A","#F1E3B9"],group2:["#53362F","#6A3A29","#DBBE92","#E4C6A4"],group3:["#8F6D4D","#7B5C3F","#E6BF7C"],group4:["#9D683E","#A7784A","#CA9C6B"]},"Cattle Watering by a Stream":{group0:["#8C7B67","#6B5B4B","#BA9A74","#D5BF9D"],group1:["#423C38","#544F4B","#706558","#8A8174","#827360","#957D64","#AB9172","#9C8B76","#B6A68C","#B49E86"],group2:["#65524B","#696967","#9C9C9E","#E0C19D"],group3:["#DAB892","#DAC09F","#DFC5A4"],group4:["#94938E","#A19E94","#B3B3A6"]},"Avenida Paulista no dia da inauguração, 8 de dezembro de 1891":{group0:["#B66F49","#CEA088","#D9C3B4","#A8ABA5"],group1:["#212F3B","#473D3B","#5A6267","#9A9C9C","#C2B8B1","#9B6046","#C28F79","#CF9F8A","#DDBEAE","#E9D0BF"],group2:["#465F5A","#A26346","#C1BDB6","#E9D0BF"],group3:["#99ABB4","#B1BDBF","#D0BFB2"],group4:["#435A60","#617E84","#7B8F89"]},"The Valley of Lauterbrunnen, Switzerland":{group0:["#4D5861","#9E9F99","#A8B3BD","#E1D7C2"],group1:["#41474C","#586574","#7E8DA0","#97ABBD","#ADBED2","#7F786A","#9B9583","#ADA896","#D2CCBC","#F0ECDA"],group2:["#57616A","#B7A98E","#C6CACE","#D9D8D6"],group3:["#E4D5B9","#EBDCC0","#EBE1CD"],group4:["#54626B","#717E84","#7D898C"]},"Landscape By Water":{group0:["#255488","#D39F78","#B8C2BA","#DDE5E7"],group1:["#4C4B47","#90734B","#B78262","#CDB392","#284078","#2C6695","#688DA4","#BCCED7","#CBD6DC","#D7E1EA"],group2:["#23356A","#344557","#CCC4AF","#D9D8D6"],group3:["#B2704A","#B7815B","#C89D79"],group4:["#739BBD","#A9C5D8","#EAF1F9"]},"The Swing":{group0:["#2A252B","#375154","#748A72","#BEC096"],group1:["#3A413F","#3B5552","#497A77","#C19D74","#ACAE8C","#BABD90","#4D6353","#577960","#759679","#95AE98"],group2:["#3C3D34","#58554B","#ABB390","#C8C290"],group3:["#A14D3A","#B6734F","#BD8061"],group4:["#C19D74","#C1AC81","#C5B993"]},"L'Île Lacroix, Rouen":{group0:["#A6AB9D","#D2D3C5","#D8C9AA","#ECE6DA"],group1:["#646961","#A6AB9D","#BDC3C9","#D2D3C5","#E4E1D2","#BFA480","#CFB591","#D8C9AA","#E0D8BC","#ECE6DA"],group2:["#6F7379","#DDCEBB","#CAC4C5","#E7E6DD"],group3:["#98A5A2","#859392","#8EA792"],group4:["#BB8369","#C69B66","#CB986F"]},"Diana and Endymion":{group0:["#DBC4AC","#476A70","#81A098","#A8B5AB"],group1:["#344648","#3A5755","#5C7A7C","#6F907F","#85A098","#97ABA2","#A8B5AB","#BAC4B9","#CDD0BB","#E3DBC7"],group2:["#4F4039","#C4B39F","#E6CCB5","#E1D9C5"],group3:["#CB6D63","#D5897C","#DB8F82"],group4:["#DCB78B","#DFC099","#E3C7A1"]}}}gH(t){var s,i=this.ps[t],r=[];for(s in i)r.push(new PaletteHandler(i[s]));return r}}class PaletteHandler{constructor(t){this.pc=t}pOC(t){t=ut.pO(this.pc,t);return color(t)}pCs(t){var s=[];let i=ut.cO(this.pc);for(;0<t;)--t,s.push(ut.pO(i,!0)),0===i.length&&(i=ut.cO(this.pc));return s}pODC(s,i,r,e){let t=0;s=Array.isArray(s)?s:[s];t:do{var h=this.pOC();for(let t=0;t<s.length;t+=1){var a=color(s[t]);if(a.toString("#rrggbb")===h.toString("#rrggbb"))continue t;if(void 0!==i&&abs(hue(h)-hue(a))<i)continue t;if(void 0!==r&&abs(saturation(h)-saturation(a))<r)continue t;if(void 0!==e&&abs(brightness(h)-brightness(a))<e)continue t}return h}while(++t<50);throw new UE("Could not find a valid color.")}}class UE extends Error{constructor(t){super(t),this.nm="UE"}}class LA{constructor(t){this.iP=t,this.init()}sSP(){this.mTW=5*unt,this.mIR=45*unt,this.mxTW=25*unt,this.mCTW=2*this.mTW*.9,this.mW=18*unt,this.cDMR=0,this.cDMxR=this.mIR+2*this.mxTW,this.cDMW=0,this.cDMxW=35*unt,0==icfg.sA%HALF_PI?this.nCDO=rWH<1?[0,2]:[1,3]:this.nCDO=[],this.iCMR=0,this.iCMxR=this.cDMxR,this.iCLTMxR=50*unt,this.dC=ut.rdT(1),this.cCMW=18*unt,this.cCMxW=this.cDMxW,this.cCMR=0,this.cCMxR=75*unt,this.cDAR=ut.pO([2/3,5/4]),this.aBCMxOR=80*unt,this.bCS=ut.pO([0,1])}rR(){this.spR=1,this.cDR=1,this.cCR=.5,this.cICR=1,this.cTNR=.5,this.cTCR=0,this.CDAR=.75}init(){this.sSP(),this.id=this.iP.id,this.prI=this.iP.prI,this.step=0,this.or=this.iP.or,this.cn=this.iP.cn,this.iR=this.iP.iR,this.oR=this.iP.oR,this.maxTracks=round(this.gW()/this.mTW),this.tr=this.iP.tr??this.maxTracks,this.tWs=this.iP.tWs??this.cTW(this.tr,this.gW()),this.phs=this.iP.phs,this.cls=this.iP.cls??this.cCl(this.tr,this.phs[1]),this.sA=ut.adA(this.iP.sA),this.dA=this.iP.dA,this.aNR=this.iP.aNR??ut.rd(0,1e4),this.iRt=this.iP.iRt??!1,this.tlA=0,this.rTA=!1,this.dn=!1,this.spd=!1,this.lCCS=-10,this.cpCTC=!1,this.dCH=!1,this.dCHTC=!1,this.tNCTC=!1,this.tMTC=!1,this.iCCCTC=!1,this.iCC=!1,this.iCCs=this.iP.iCCs??[],this.lICOC=[],this.cCH=!1,this.dAD=!1,this.cDALS=0,this.dACTC=!1,this.nLAP=[],this.sAP=[],this.fICC=this.iP.fICC,this.lO1C=[],this.lNICC=-1,this.aBCLS=2,this.lBC1S=0,this.pBCC=[color("black"),color("black")],this.rR(),void 0!==this.iP.cDAI&&(this.cDR=this.iP.cDAI?1:0,1===this.cDR)&&this.cCD()&&(this.cD(),this.aBCLS=1),this.iP.cTNAI&&this.cTN()}gW(){return this.oR-this.iR}cHP(t){return ut.r4(t/HALF_PI)}gAQ(t){return floor(this.cHP(t))%4}gEA(){return ut.adA(this.sA+this.dA)}cTWS(s,i){let r=0;for(let t=s;t<=i;t+=1)r+=this.tWs[t];return r}cR(t){return this.iR+this.cTWS(0,t)}p1P(){return ut.pO(this.phs)}iOg(t){return t.x===icfg.orn.x&&t.y===icfg.orn.y}hD(){return this.dn}uD(){let t=!1;this.spd&&(t=!0),4<=this.cHP(abs(this.tlA))&&(t=!0);var s=ut.cP(this.cn,this.iR,this.sA),i=ut.cP(this.cn,this.oR,this.sA);ut.iOC(s)&&ut.iOC(i,!1)&&(t=!0),this.dn=t}grow(){this.iRt&&(this.sCP(),this.cTN(),this.sCP());for(this.clN=0;this.cycle(),this.sCP(),this.clN+=1,!this.hD()&&this.step<20;);}cycle(){this.dS()&&this.sp(),this.dCC()&&this.cC(),this.dCTN()&&this.cTN(),this.dCDC()&&this.cD(),this.dCTC()&&this.cTC(),this.dCD()&&this.cDA(),this.dCIC()&&this.cIC(),this.dABC()&&this.aBC()}cS(){return!!this.iRt&&0!==this.step&&!(this.cpCTC||0===this.spR||this.gW()<2*this.mW)}cCC(){return this.iRt,!(!this.iRt&&0===this.step||!ut.iNB(this.oR,this.cCMR,this.cCMxR,!0)||!ut.iNB(this.gW(),this.cCMW,this.cCMxW,!0)||0!=this.cHP(abs(this.tlA))%2||this.spd)}cCD(){return!this.dCHTC&&!this.cpCTC&&!(this.iR<this.cDMR||this.oR>this.cDMxR||!ut.iNB(this.gW(),this.cDMW,this.cDMxW,!0)||0===this.cDR||!this.iRt&&this.nCDO.includes(this.gAQ(this.sA)))}cCIC(){return!this.iCCCTC&&!(this.iOg(this.cn)&&this.cS()||this.spd||this.iR<this.iCMR||this.iR>this.iCMxR||this.iCCs.includes(this.cn.array().toString())||(this.iCCs.push(this.cn.array().toString()),this.cHP(abs(this.tlA))<=1||this.cHP(abs(this.tlA)),0))}cCTN(){return!this.spd&&!this.tNCTC&&(this.dAD,!this.cpCTC)&&0!==this.step}cCTC(){return!this.cCH&&!this.cpCTC&&!this.tNCTC&&(this.tr,0!==this.step)}cCDA(){return!(this.spd||this.cpCTC||this.iOg(this.cn)||(this.iCC,0))}cABC(){return!this.spd&&!(0<this.step&&!this.dCHTC||(0<this.aBCLS?(--this.aBCLS,1):this.oR>this.aBCMxOR||(this.dACTC?(this.lBC1S=(this.lBC1S+1)%2,1):!this.iCCCTC)))}dS(){return!!this.cS()&&!!this.iRt&&0!==this.step&&!this.nCDO.includes(this.gAQ(this.sA))&&(1<=this.spR||ut.rdT(this.spR))}dCC(){return!!this.cCC()&&ut.rdT(this.cCR)}dCDC(){return!!this.cCD()&&(1<this.cHP(abs(this.tlA))||ut.rdT(this.cDR))}dCIC(){if(!this.cCIC())return!1;if((!this.iOg(this.cn)||!this.cCD())&&this.dACTC){if(!this.fICC)return this.fICC=!0;if(this.dACTC&&-1===this.lNICC){if(this.oR>80*unt)return!0;var t;if(1<this.cDAR)return(t=ut.rdT(this.cICR))||(this.lNICC=this.step),t}}return!0}dCTN(){return!!this.cCTN()&&ut.rdT(this.cTNR)}dCTC(){return!!this.cCTC()&&ut.rdT(this.cTCR)}dCD(){return!!this.cCDA()&&(0!==this.cDALS?(--this.cDALS,!1):(this.cDALS=1,!!ut.rdT(this.CDAR)))}dABC(){return!!this.cABC()}sp(){var t,s=[!0,!1],i=this.tr-1;let r,e,h=0,a=!1;var o,u,n,c,l;do{if(h+=1,r=ut.clp(ut.irr(1,i),1,this.tr-1),e=this.cTWS(0,r-1),t=this.cTWS(r,this.tr-1),e>this.mW&&t>this.mW){a=!0;break}}while(h<=100);a&&(o=this.iR+e,c=this.cls.slice(0,r),u=this.cls.slice(r),l=this.tWs.slice(0,r),n=this.tWs.slice(r),c={cn:this.cn,sA:this.sA,dA:this.dA,aNR:this.aNR,iR:this.iR,oR:o,cls:c,tr:l.length,tWs:l,cDAI:ut.pO(s,!0),cTNAI:ut.rdT(this.cTNR),createInnerCirclesAtInit:!0,iCCs:this.iCCs},l={cn:this.cn,sA:this.sA,dA:this.dA,aNR:this.aNR,iR:o,oR:this.oR,cls:u,tr:n.length,tWs:n,cDAI:ut.pO(s,!0),cTNAI:!0,createInnerCirclesAtInit:!0,iCCs:this.iCCs},this.aLAP(c),this.aLAP(l),this.spd=!0)}cC(){var t=this.gW(),s=(this.iOg(this.cn)||(s=this.phs[1].pOC(),s={zIndexBias:-2,cn:this.cn,tr:1,cls:[s],tWs:[this.oR],iR:0,oR:this.oR,sA:this.sA,dA:Math.sign(this.dA)*PI,smS:-1},this.aSAP(s)),this.dC&&(s=this.phs[2].pOC(),s={zIndexBias:1,cn:ut.cP(this.cn,this.oR,this.sA),tr:1,cls:[s],tWs:[t],iR:0,oR:t,sA:this.sA+PI,dA:Math.sign(this.dA)*PI,smS:1},this.aSAP(s)),this.iR),i=this.oR,i=ut.cP(this.cn,this.oR+i,this.sA),r=(this.cn=i,this.sA+=PI,this.dA=-1*Math.sign(this.dA)*PI,this.cls=this.cCl(1,this.phs[1]),this.tr=1,this.tWs=[t],this.lCCS=this.step,this.cpCTC=!0,this.dCHTC=!0,this.phs[1].pOC()),i={zIndexBias:ut.pO([0,-1]),cn:i,tr:1,cls:[r],tWs:[t],iR:s,oR:s+t,sA:this.sA+PI,dA:Math.sign(this.dA)*PI,smS:-1};this.lO1C=r,this.aSAP(i)}cD(){var t=this.gW();this.cn=ut.cP(this.cn,2*this.iR+t,this.sA),this.sA+=PI,this.dA*=-1,this.tlA=0,this.cls=this.cls.slice().reverse(),this.tWs=this.tWs.slice().reverse(),this.or*=-1,this.dCHTC=!0,this.dCH=!0}cIC(){let r=this.sA;var t=this.iR<this.iCLTMxR&&1==this.step%2,e=[1,ut.pO([1,2])],h=t?3:max(3,round(this.iR/this.mTW)+ut.irr(-2,0)),a=this.cTW(h,this.iR);let o,u=!0;for(let i=0;i<2;i+=1){var n=ut.pO(e,!0);let t=0;0<(t=2!==n&&u?icfg.pCM:t)&&(u=!1);let s;s=1===h?void 0===o?(c=this.phs[n].pOC(),[o=c]):[this.phs[n].pODC(o,0,0,20)]:this.cCl(h,this.phs[n],t),1===i&&ut.iSC(s[s.length-1],this.lO1C)&&(s[s.length-1]=this.phs[n].pODC(this.lO1C));var c={cn:this.cn,tr:h,cls:s,tWs:a,iR:0,oR:this.iR,sA:r,dA:PI*Math.sign(this.dA),aNR:this.aNR,isInnerCircles:!0,smS:0===i?1:-1};this.aSAP(c),this.lICOC[i]=s[s.length-1],r+=PI}this.iCC=!0,this.iCCCTC=!0,this.iLT=t}aBC(){var t=this.pBCC,t=this.phs[2].pODC(t),s=[0===this.bCS?this.pBCC[1]:this.pBCC[0],t],i=(this.lICOC[1]&&s.push(this.lICOC[1]),this.phs[2].pODC(s)),s=1<scp?1.5:1.25,s=this.oR*max(1,s-.5*this.lBC1S),r=this.sA+PI*this.lBC1S,e={zIndexBias:-100,cn:this.cn,tr:1,cls:[t],tWs:[s],iR:0,oR:s,sA:r,dA:Math.sign(this.dA)*PI,smS:this.iSA(r,this.sA)?1:-1},h=(this.aSAP(e),0===this.bCS&&(e=r+PI,s={zIndexBias:-100,cn:this.cn,tr:1,cls:[i],tWs:[s],iR:0,oR:s,sA:e,dA:Math.sign(this.dA)*PI,smS:this.iSA(e,this.sA)?1:-1},this.aSAP(s)),.95*this.oR);for(let t=0;t<2;t+=1){var a=r+PI*t,a={zIndexBias:-100,cn:this.cn,tr:1,cls:[i],tWs:[h],iR:0,oR:h,sA:a,dA:Math.sign(this.dA)*PI,smS:this.iSA(a,this.sA)?1:-1};this.aSAP(a)}this.aBCLS=0===this.bCS?1:0,this.pBCC=[t,i]}iSA(t,s){return 0===ut.r4(ut.adA(t)-ut.adA(s))}cTN(){let s=!1;1===this.tWs.length&&(s=!0);for(let t=0;t<this.tWs.length;t+=1)if(this.tWs[t]>this.mCTW){s=!0;break}s?this.icT():2<=this.tr&&!this.tMTC&&(this.dcT(),this.tMTC=!0)}icT(){this.cls[0];var s=[];for(let t=0;t<this.tr;t+=1){var i,r=this.tWs[t];r/2<this.mTW?s.push(r):(i=round(r/this.mTW),i=this.cTW(i,r),s.push(...i))}this.tr=s.length,this.tWs=s,this.cls=this.cCl(this.tr,this.phs[1]),this.tNCTC=!0}dcT(){this.tr;var t=[];let s=this.tr,i=0,r=0;let e=0;do{e+=1;var h=ut.irr(1,s),a=min(this.tr-1,i+h-1),a=this.cTWS(i,a);a>this.mxTW||(t.push(a),r+=a,s-=h,i+=h)}while(0<s&&e<100);0<ut.r4(this.gW()-r)&&t.push(this.gW()-r),this.tWs=t,this.tr=t.length,1===this.tr?this.cls=this.cCl(this.tr,this.phs[2],0):this.cls=this.cCl(this.tr,this.phs[1],0),this.tNCTC=!0}cTC(){var t=this.cCl(this.tr,this.phs[1]);this.cls=t,this.cCH=!0}cTW(s,t){var i,r,e;if(3===s)return i=t,[i=(i-=r=min(t/2,ut.rd(1,2)*this.mTW))-(e=ut.rd(.45,.55)*i),e,r];var h=[],a=t/s,o=a/s;let u=t;for(let t=0;t<s-1;t+=1){var n=a+ut.rd(-o,o);h.push(n),u-=n}return h.push(u),h}cCl(t,s,i){return i=i??icfg.pCM,s=s??this.p1P(),0===i?this.sSC(t,s):this.cGC(t,s,i)}sSC(t,s){let i=s.pOC();var r=[];r.push(i);let e=0;let h=40;for(;r.length<t&&++e<=50;)try{var a=s.pODC(i,0,0,h);r.push(a),i=a}catch(t){h=max(0,h-5)}if(r.length!==t)throw new Error(`Unable to create staggered cls: ${t} tracks, ${r.length} cls.`);return r}cGC(t,s,i){s=s.pCs(t);let r=1===i?1:-1;return s.sort((t,s)=>r*(parseInt(t.substring(1),16)-parseInt(s.substring(1),16))),s}cDA(){this.dA*=this.cDAR,this.dACTC=!0}sCP(){var t={cn:this.cn,tr:this.tr,tWs:this.tWs.slice(0),cls:this.cls.slice(0),iR:this.iR,oR:this.oR,sA:this.sA,dA:this.dA,aNR:this.aNR,smS:1},s=(this.rR(),Math.sign(this.dA));this.iRt&&this.step<2&&(this.dABC()&&this.aBC(),0===this.step?t.smS=-1:1===this.step&&(this.dI(),this.dOT()));let i=1;this.dACTC&&(this.cDR=1,this.dACTC=!1,i=.8),this.spd||this.aSAP(t),this.rTA&&(this.tlA=0,this.rTA=!1),this.tMTC&&(this.cDR=1,this.tMTC=!1),this.cpCTC&&(this.cDR=1),this.sA+=this.dA,this.cpCTC||(this.tlA+=this.dA),this.uD(),this.dA=PI*s*i,this.step+=1,this.dCHTC=!1,this.tNCTC=!1,this.iCCCTC=!1,this.cpCTC=!1}dI(){let s=this.iR,i=0;for(let t=0;t<this.tr;t+=1)if((s=this.cR(t))>=this.mIR){i=t+1;break}this.tWs.splice(0,i),this.cls.splice(0,i),this.tr=this.tWs.length,this.iR=s}dOT(){if(0!==this.tr){let s=this.oR,i=0;for(let t=0;t<this.tr&&!(this.cR(t)>=this.cDMxR);t+=1)s=this.cR(t),i=t+1;this.tWs.splice(i),this.cls.splice(i),this.tr=this.tWs.length,this.oR=s}}aLAP(t){t.prI=this.id,t.step=this.step,t.subId=this.nLAP.length,t.phs=this.phs,t.or=this.or,this.nLAP.push(t)}cSI(){return this.sAP.length}aSAP(t){t.id=this.id,t.prI=this.prI,t.step=this.step,t.subId=this.cSI(),t.or=this.or,t.iLT=this.iLT,this.sAP.push(t)}gNP(){return this.nLAP}gSP(){return this.sAP}}class AS{constructor(){this.sCDV(),this.sDV(),this.unt=min(width,height)/300,this.rNs={}}rd(){return void 0!==ut?ut.rd():random()}sT(t){return this.tg=t,this}sCDV(){this.sTn(7).sSS(0).sSPF(.5).sDPF(1).sNSD(0).sH(.5,0).sTl(.5,5).sMDF(10).sSC(ROUND).sE(1).sBDN(30,.3).sBSN(100,.3).sTN(1,1).sCNM(0).sCN(.1,.02).sTNS(50)}gS(){this.sSd=new p5.Shader(this._renderer,this.gV(),this.gF())}gV(){return sCV}sCNM(t){return this.cNM=t,this}sSC(t,s,i){return this.stC=t,this.stCP1=s,this.stCP2=i,this}sCl(t){return this.color=color(t),this}sSz(t,s){return this.stS=t,this.enS=s??t,this}gMZ(){return(this.stS+this.enS)/2}gMS(){return.5}gMSA(){return!1}sTn(t){return this.tense=t,this}sSS(t){return this.sdS=t,this}sFN(t,s){return this.stF=t,this.enF=s,this}sDFC(t){return this.dFC=t,this}sOF(){return this.oF=!0,this.dFC=1,this}sMDF(t){return this.mDF=t,this}gSF(){return this.stF=this.stF??frameCount,this.stF}gEF(){return void 0!==this.dFC&&(this.enF=this.stF+this.dFC),void 0===this.enF&&this.sDF(),this.enF}sDfFC(t){return this.dfFC=t,this}gDfFC(){var t;return void 0===this.dfFC&&(t=round(this.stS/this.unt/10)*this.dPF,this.sDfFC(t)),void 0!==this.stF&&void 0!==this.enF&&(t=min(this.dfFC,max(0,this.enF-this.stF-1)),this.sDfFC(t)),this.dfFC}sSPF(t){return this.sPF=t,this}sDPF(t){return this.dPF=t,this}uSPF(t){var s=this.stF,i=this.enF,r=(this.enF,this.stF,frameCount-s),i=i-frameCount,e=t/this.sPF,r=frameCount-floor(r*e),i=max(frameCount+ceil(i*e),s+1);i-frameCount<=1&&this.sOF(!0),this.sFN(r,i),this.sSPF(t)}sE(t){return this.evn=t,this}sNSD(t){return this.nSD=t,this}sBSN(t,s){return this.bSN=t,this.bSNV=s,this}sTl(t,s){return this.tlR=t,this.tlS=s,this}sH(t,s){return this.hdR=t,this.hdS=s,this}sBDN(t,s){return this.bDNS=t,this.bDNV=s,this}sTN(t,s){return this.tNS=t,this.tNV=s,this}sCN(t,s,i,r){return this.cNS=t,this.cNVH=s,this.cNVS=void 0!==i?i:s,this.cNVB=void 0!==r?r:s,this}sTNS(t){return this.tlSNS=t,this}gRN(t,s){return this.rNs[t]=this.rNs[t]??round(this.rd(1,10)*pow(10,s)),this.rNs[t]}cvC(t){return(t=color(t))._array}sRS(t){return this.rmS=t,this}gRS(){return this.rmS??this.gRN("uRandom",5)}sU(){var t=this.sSd;t.setUniform("uUL",this.unt),t.setUniform("uImg",this.tg),t.setUniform("uSize",[this.tg.width,this.tg.height]),t.setUniform("uRm",this.gRS()),t.setUniform("uCF",frameCount);let s;ROUND===this.stC?s=0:SQUARE===this.stC&&(s=1),t.setUniform("uCl",this.cvC(this.color)),t.setUniform("uStS",this.stS),t.setUniform("uEnS",this.enS),t.setUniform("uMdS",this.gMZ()),t.setUniform("uMdP",this.gMS()),t.setUniform("uMSA",this.gMSA()),t.setUniform("uTn",this.tense),t.setUniform("uSdS",this.sdS),t.setUniform("uStF",this.gSF()),t.setUniform("uEnF",this.gEF()),t.setUniform("uDfFC",this.gDfFC()),t.setUniform("uHdR",this.hdR),t.setUniform("uHdS",this.hdS),t.setUniform("uTlR",this.tlR),t.setUniform("uTlS",this.tlS),t.setUniform("uStC",s),t.setUniform("uStCP1",this.stCP1??0),t.setUniform("uStCP2",this.stCP2??0),t.setUniform("uEvn",this.evn),t.setUniform("uBSN",this.bSN),t.setUniform("uBSNV",this.bSNV),t.setUniform("uBDNS",this.bDNS),t.setUniform("uBDNV",this.bDNV),t.setUniform("uTNS",this.tNS),t.setUniform("uTNV",this.tNV),t.setUniform("uTlSNS",this.tlSNS),t.setUniform("uCNM",this.cNM),t.setUniform("uCNS",this.cNS),t.setUniform("uCNVH",this.cNVH),t.setUniform("uCNVS",this.cNVS),t.setUniform("uCNVB",this.cNVB),t.setUniform("uENS",10),t.setUniform("uCNR",this.gRN("common",4));var i,r=this.gU();for(i in r)t.setUniform(i,r[i])}draw(t){this.sSd||this.gS(),t.shader(this.sSd),this.sU(),t.noStroke(),t.rect(-1*t.width/2,-1*t.height/2,t.width,t.height),t.resetShader()}iF(t){var s;return void 0===this.fnd&&(t=t??frameCount,s=this.gEF()+this.nSD+1,this.fnd=s<=t),this.fnd}}let bSF=`
precision highp float;varying highp vec2 vTexCoord;uniform float uUL;uniform sampler2D uImg;uniform vec2 uSize;uniform float uRm;uniform float uCF;uniform int uStC;uniform float uStCP1;uniform float uStCP2;uniform vec4 uCl;uniform float uStS;uniform float uEnS;uniform float uMdS;uniform float uMdP;uniform bool uMSA;uniform float uTn;uniform float uSdS;uniform float uStF;uniform float uEnF;uniform float uDfFC;uniform float uHdR;uniform float uHdS;uniform float uTlR;uniform float uTlS;uniform float uEvn;uniform float uENS;uniform float uBSN;uniform float uBSNV;uniform float uBDNS;uniform float uBDNV;uniform float uTNS;uniform float uTNV;uniform int uCNM;uniform float uCNS;uniform float uCNVH;uniform float uCNVS;uniform float uCNVB;uniform float uTlSNS;uniform float uCNR;highp float o(vec2 a){a+=uRm*12345./1e+4;return fract(sin(dot(a,vec2(12.9898,78.233)))*43758.5453);}float y(in vec2 d){vec2 a=floor(d);vec2 b=fract(d);float e=o(a);float f=o(a+vec2(1.,0.));float h=o(a+vec2(0.,1.));float i=o(a+vec2(1.,1.));vec2 c=b*b*(3.-2.*b);c=smoothstep(0.,1.,b);return mix(e,f,c.x)+(h-e)*c.y*(1.-c.x)+(i-f)*c.x*c.y;}vec4 P(vec4 a){return a-floor(a*(1./289.))*289.;}vec4 p(vec4 a){return P((a*34.+1.)*a);}float g(vec3 c){vec3 b=floor(c);vec3 a=c-b;a=a*a*(3.-2.*a);vec4 d=b.xxyy+vec4(0.,1.,0.,1.);vec4 h=p(d.xyxy);vec4 i=p(h.xyxy+d.zzww);vec4 e=i+b.zzzz;vec4 j=p(e);vec4 k=p(e+1.);vec4 l=fract(j*(1./41.));vec4 m=fract(k*(1./41.));vec4 f=m*a.z+l*(1.-a.z);vec2 n=f.yw*a.x+f.xz*(1.-a.x);return n.y*a.y+n.x*(1.-a.y);}vec4 Q(vec4 a){vec4 d=vec4(0.,-1./3.,2./3.,-1.);vec4 c=mix(vec4(a.bg,d.wz),vec4(a.gb,d.xy),step(a.b,a.g));vec4 b=mix(vec4(c.xyw,a.r),vec4(a.r,c.yzx),step(c.x,a.r));float e=b.x-min(b.w,b.y);return vec4(abs(b.z+(b.w-b.y)/(6.*e+1e-10)),e/(b.x+1e-10),b.x,a.a);}vec4 R(vec4 b){vec4 a=vec4(1.,2./3.,1./3.,3.);vec3 c=abs(fract(b.xxx+a.xyz)*6.-a.www);return vec4(b.z*mix(a.xxx,clamp(c-a.xxx,0.,1.),b.y),b.a);}float s(vec2 a,vec2 b){float c=atan(b.y,b.x)-atan(a.y,a.x);if(c<0.){c+=6.283185;}return c;}bool A(){return uStF<=uCF&&uCF<=uEnF;}vec4 z(vec4 b,vec4 c){vec4 a;a.rgb=b.rgb*b.a+c.rgb*(1.-b.a)*c.a;a.a=c.a+b.a*(1.-c.a);if(a.a>0.){a.rgb/=a.a;}return a;}vec4 B(vec4 a,vec4 b){return z(b,a);}vec2 C(vec2 a){return vec2(a.x-uSize.x*.5,a.y-uSize.y*.5);}float u(){vec3 a=vec3(vTexCoord,uCNR/1000.)*uBSN;float b=(1.*g(a)+1./2.*g(a*2.))/(1.+1./2.);return (b*2.-1.)*uBSNV;}float v(bool c){vec3 a=vec3(vTexCoord+1.,uCNR/1000.)*uBDNS;float b=(1.*g(a)+1./2.*g(a*2.))/(1.+1./2.);if(c){b=b*2.-1.;}return b*uBDNV;}float D(){float a=u();float b=v(true);float c=b*uStS/uUL+a;return c;}float w(float b){if(b<0.){return uStS;}else if(b>1.){return uEnS;}else if(!uMSA){return mix(max(uStS,1.),max(uEnS,1.),b);}float a=0.;if(b<uMdP){a=b/uMdP;a=smoothstep(0.,1.,a);return mix(max(uStS,1.),max(uMdS,1.),a);}else{a=(b-uMdP)/(1.-uMdP);a=smoothstep(0.,1.,a);return mix(max(uMdS,1.),max(uEnS,1.),a);}}bool E(float a,float c,float d){float b=w(c);if(a<b*(1.+d*uUL)){return false;}else if(a<b*(1.+uBSNV*uUL)){return false;}else if(a<b*(1.+uBDNV*uUL)){return false;}return true;}vec2 F(float b){float a=w(b);float c=u();float d=v(false);vec2 e=vec2(-.5,.5);vec2 f=a*e+a*d+c*uUL;return f;}bool S(float d,float e){if(0.>=uHdR&&0.>=uTlR){return false;}if(0.>=uHdS&&0.>=uTlS){return false;}float f=max(uStS,uEnS);float b=float(d)/f;float a=-1.;if(uHdR!=0.&&uHdS!=0.){a=1.-pow(g(vec3(b,vTexCoord.x,vTexCoord.y)*uTlSNS),uHdS/10.);a=mix(0.,uHdR,a);}float c=pow(g(vec3(b,vTexCoord.x,vTexCoord.y)*uTlSNS),uTlS/10.);c=mix(1.-uTlR,1.,c);return e<a||e>c;}float G(float e,float b,vec2 a){float c=(a.x+a.y)/2.;float d=abs(a.y-a.x)/2.;return (b-c)/d;}bool T(float a,float b,vec2 c){if(b<c.x||b>c.y){return false;}else if(1==uStC&&(a<0.||a>1.)){return false;}return true;}vec4 H(vec4 k,float l,float h,vec2 j){vec4 a=uCl;float i=pow(abs(h),pow((abs(uTn)+10.)/10.,5.));float d=a.a;if(i>0.){if(uTn>=0.){d=mix(d,0.,smoothstep(0.,1.,i));}else{d=mix(d,1.,smoothstep(0.,1.,i));}}a.a=mix(0.,a.a,d);vec2 b=vec2(vTexCoord.x,vTexCoord.y)*uENS;float c=uCNR/1e+4;float f=1.*g(vec3(b,c))+1./2.*g(vec3(b*2.,c+11.))+1./4.*g(vec3(b*4.,c+13.))+1./8.*g(vec3(b*8.,c+15.))+1./16.*g(vec3(b*16.,c+17.));f/=1.+1./2.+1./4.+1./8.+1./16.;f=f*(1.-uEvn)+uEvn;a.a*=f;float e;if(0==uCNM){e=g(vec3(l*100.,h*100.,(j.x+j.y)/uUL+uCNR)*uCNS);}else{vec2 m=vec2(fract(vTexCoord.x*12345.+uCNR),fract(vTexCoord.y*1234.+uCNR));e=y(m*1000.*uCNS)*2.-1.;}a=Q(a);a.x-=e*uCNVH;a.y-=e*uCNVS;a.z-=e*uCNVB;a=R(a);a=z(a,k);return a;}bool U(){return uStF<uEnF;}float I(float a){float b=max(uEnF-uDfFC,uStF+1.);float c=clamp(a,0.,1.);return mix(uStF,b,c);}float J(float a){return max(1.,pow(a,abs(uTn))*uDfFC);}vec4 V(vec4 k,vec4 d,float e,float f){float b=I(f);vec2 a=vTexCoord*75.;float h=1.*g(vec3(a,uCNR))+1./2.*g(vec3(a*2.,uCNR+1111.))+1./4.*g(vec3(a*4.,uCNR+2222.))+1./8.*g(vec3(a*8.,uCNR+3333.))+1./16.*g(vec3(a*16.,uCNR+4444.));h/=1.+1./2.+1./4.+1./8.+1./16.;b=min(uEnF,b+floor(uDfFC*h));float i=min(uEnF,b+uDfFC);if(b>uCF){discard;}else if(i>uStF&&i<=uCF){return d;}else{float j=J(e);float l=y(vTexCoord*uTNS+.03)*uTNV;float m=min(1.,(uCF-b)/j);vec4 c=d;c.a*=min(1.,pow(m,1.5+l));c=z(c,k);return c;}}vec4 K(vec4 c,vec4 i,float a,float d,vec2 e,vec2 f){float b=G(a,d,e);vec4 h=H(c,a,b,C(f));if(U()){return V(i,h,b,a);}else{return h;}}vec4 L(vec4 b,vec4 e,float a,float c,vec2 f,bool h){vec2 d=F(a);if(!T(a,c,d)){if(h){discard;}else{return b;}}if(S(c,a)){if(h){discard;}else{return b;}}vec4 i=K(b,e,a,c,d,f);return B(b,i);}
`;class ArcS extends AS{sDV(){this.sCl(color("#080808")).sAC(createVector(0,0)).sSA(0).sDA(-1*TWO_PI).sR(30,50).sSz(10,5).sAN(.5,10)}sAC(t){return this.arC=t,this}sSA(t){return this.sA=t,this}sDA(t){return this.dA=t,this}sR(t,s){return this.stR=t,this.enR=s??t,this}sAN(t,s){return this.aNS=t,this.aNV=s,this}sANR(t){return this.aNR=t,this}gANR(){return this.aNR=this.aNR??this.gRN("arc",4),this.aNR}gAF(){return this.arNR=this.arNR??this.arC,this.arNR}sDF(){var t=this.stF??frameCount,s=max(this.mDF,round((this.stR/this.unt*abs(this.dA)/20+this.gDfFC())*this.sPF));this.sFN(t,t+s)}gEA(){return this.sA+this.dA}gL(){var t=this.gEA(),s=ceil(abs(t)/TWO_PI);return 0<t?s:s+1}gF(){return bSF+aSF.replace("{{loops}}",this.gL())}gU(){var t=[this.arC.x+.5*this.tg.width,this.arC.y+.5*this.tg.height],s=this.gAF(),s=[s.x+.5*this.tg.width,s.y+.5*this.tg.height];return{uAC:t,uStA:this.sA,uEnA:this.gEA(),uStR:this.stR,uEnR:this.enR,uDr:this.gEA()>=this.sA?1:-1,uANS:this.aNS,uANV:this.aNV,uANR:this.gANR(),uANRf:s}}}let aSF=`
uniform vec2 uAC;uniform float uStA;uniform float uEnA;uniform float uStR;uniform float uEnR;uniform float uDr;uniform float uANS;uniform float uANV;uniform float uANR;uniform vec2 uANRf;float W(float a){if(a<0.||a>1.){return 0.;}float b=g(vec3(a+uANR,vec2(uANRf.x,uANRf.y)/uUL)*uANS)*2.-1.;float c=smoothstep(0.,1.,pow((.5-abs(.5-abs(a)))*2.,.5));return b*c*uANV*uUL;}void main(){if(!A()){discard;}vec2 h=vTexCoord;vec4 b=texture2D(uImg,h);vec2 l=uAC+(uStR+uSdS*uStS)*vec2(cos(uStA),sin(uStA));vec2 m=uAC+(uEnR+uSdS*uEnS)*vec2(cos(uEnA),sin(uEnA));vec2 d=h*uSize;float n=uEnA-uStA;vec2 i=d-uAC;float e=atan(i.y,i.x);if(e<0.){e=e+6.283185;}bool r=false;vec4 f=b;vec4 t=b;for(int j=-1;j<{{loops}}+1;j+=1){float q=e+uDr*float(j)*6.283185;if(uDr>0.&&q<-.5*3.141593){continue;}float k=q-uStA;float a=k/n;k+=D()*3.141593/300.;a=k/n;float c=uSize.x;if(a<0.){c=distance(d,l);}else if(a>1.){c=distance(d,m);}else{float x=mix(distance(l,uAC),distance(m,uAC),a);c=distance(uAC,d)-x;}if(E(abs(c),a,uANV)){continue;}c+=W(a);f=L(t,f,a,c,uAC,false);if(f!=b){r=true;}t=f;}if(!r){discard;}gl_FragColor=B(b,f);}
`;class LnS extends AS{sDV(){this.sCl(color("#74b5a9")).sSz(10,5).sP(createVector(0,0),createVector(this.rd(-.2,.2)*width,this.rd(-.2,.2)*height)).sSN(.2,10)}sP(t,s){return this.stP=t,this.enP=s??t,this}sSN(t,s){return this.stNS=t,this.stNV=s,this}sSNR(t){return this.stNR=t,this}gSNR(){return this.stNR=this.stNR??this.gRN("straight",4),this.stNR}sDF(){var t=this.stF??frameCount,s=this.stP.dist(this.enP),s=max(this.mDF,round((s/this.unt/20+this.gDfFC())*this.sPF));this.sFN(t,t+s)}gF(){return bSF+lSF}gU(){return{uStP:[this.stP.x+.5*this.tg.width,this.stP.y+.5*this.tg.height],uEnP:[this.enP.x+.5*this.tg.width,this.enP.y+.5*this.tg.height],uStNS:this.stNS,uStNV:this.stNV,uStNR:this.gSNR()}}}let lSF=`
uniform vec2 uStP;uniform vec2 uEnP;uniform float uStNS;uniform float uStNV;uniform float uStNR;float Y(float a){if(a<0.||a>1.){return 0.;}float b=g(vec3(a,vTexCoord.x,vTexCoord.y+uStNR)*uStNS)*2.-1.;float c=smoothstep(0.,1.,pow((.5-abs(.5-abs(a)))*2.,.5));return b*c*uStNV*uUL;}float M(vec2 a,vec2 b){float c=dot(a,b)/length(a);return c;}void main(){if(!A()){discard;}vec2 k=vTexCoord;vec4 x=texture2D(uImg,k);vec2 b=k*uSize;vec2 c=uStP;vec2 d=uEnP;vec2 a=d-c;if(1==uStC){vec2 l=b-c;float N=s(l,a);vec2 _=normalize(a)*length(l)*sin(uStCP1)*sign(sin(N));c+=_;vec2 m=b-d;float O=s(m,a);vec2 aa=normalize(a)*length(m)*sin(uStCP2)*sign(sin(O));d+=aa;}vec2 n=length(a)>0.?normalize(vec2(-1.*a.y,a.x)):vec2(0.);vec2 i=c+n*uStS*uSdS;vec2 t=d+n*uEnS*uSdS;vec2 j=t-i;vec2 e=b-i;float q=length(j);float ba=length(e);float r=M(j,e)-0.;float f=r/q;r+=D()*uUL;f=r/q;float h=0.;if(q<1e-4){h=ba;f=0.;}else if(f<0.){h=distance(b,i);}else if(f>1.){h=distance(b,t);}else{float ca=s(j,e);h=length(e)*sin(ca);}if(E(abs(h),f,uStNV)){discard;}h+=Y(f);gl_FragColor=L(x,x,f,h,i,true);}
`;class SH{constructor(){this.pg=createGraphics(width,height,WEBGL),this.pg.noStroke(),this.qdS=[]}qS(t){t.id=this.qdS.length,this.qdS.push(t)}draw(t){t=this.gCS(t);void 0!==t&&(this.pg.clear(),this.copy(t.tg,this.pg),t.draw(this.pg),t.stF==t.enF||frameCount==t.enF)&&(this.copy(this.pg,t.tg),t.fnd=!0)}gCS(t){if(void 0===t)return this.crS;let s=this.crS;return(void 0===s||s.iF())&&(s=this.qdS.shift())&&this.pS(s,t),this.crS=s}pS(t,s){!0!==t.oF&&(void 0!==s.dFC&&t.sDFC(s.dFC),void 0!==s.sPF&&(0===s.sPF?t.sDFC(1):t.sSPF(s.sPF)),void 0!==s.dPF)&&t.sDPF(s.dPF)}copy(t,s){s.clear();var i=new p5.Shader(this._renderer,sCV,this.gCF());s.shader(i),i.setUniform("uImg",t),s.rectMode(CENTER),s.rect(0,0,t.width,t.height),s.rectMode(CORNER),s.resetShader()}sF(){var t=this.gCS();return void 0===t||t.iF()}aF(){return 0===this.qdS.length&&this.sF()}gO(){return this.sF()&&void 0!==this.crS?this.crS.tg:this.pg}uSPF(t){this.sF()||this.crS.uSPF(t)}gCF(){return"precision highp float;varying highp vec2 vTexCoord;uniform sampler2D uImg;void main(){gl_FragColor = texture2D(uImg, vTexCoord);}"}}let sTF=`
precision highp float;varying highp vec2 vTexCoord;uniform float uUL;uniform sampler2D uImg;uniform vec2 uSize;uniform float uFW;uniform vec4 uFC;uniform int uTt;uniform float uRS;uniform bool uSF;uniform bool uST;highp float l(vec2 a){a+=uRS/1e+4;return fract(sin(dot(a,vec2(12.9898,78.233)))*43758.5453);}vec4 t(vec4 a){return a-floor(a*(1./289.))*289.;}vec4 j(vec4 a){return t((a*34.+1.)*a);}float f(vec3 c){c+=uRS/1e+4;vec3 b=floor(c);vec3 a=c-b;a=a*a*(3.-2.*a);vec4 d=b.xxyy+vec4(0.,1.,0.,1.);vec4 h=j(d.xyxy);vec4 i=j(h.xyxy+d.zzww);vec4 e=i+b.zzzz;vec4 k=j(e);vec4 m=j(e+1.);vec4 n=fract(k*(1./41.));vec4 o=fract(m*(1./41.));vec4 g=o*a.z+n*(1.-a.z);vec2 p=g.yw*a.x+g.xz*(1.-a.x);return p.y*a.y+p.x*(1.-a.y);}float q(float a){return floor(a+.5);}mat2 u(float a){return mat2(cos(a),-sin(a),sin(a),cos(a));}vec4 v(vec4 b){vec2 a=vTexCoord*uSize/uUL/800.;float c=f(vec3(a*1000.,1.));float d=abs(fract(a.y*250.)-.5)*2.;float e=abs(fract(a.x*250.)-.5)*2.;float g=.8*max(d,e);float h=pow(c*g,1.);b.rgb-=mix(-.5,1.,h)*.15;return b;}vec4 w(vec4 e){float d=floor(uRS/1e+4);vec2 b=vec2(fract(d)*100.,fract(d)*1000.);vec2 a=vTexCoord*uSize*10./uUL/min(uSize.x/uUL,uSize.y/uUL)+b;float k=q(l(b))*3.141593/2.;a=u(k)*a;float g=q(l(vec2(.5)))*2.-1.;float h=g*((l(b)*2.-1.)*.01+.08);a*=vec2(cos(h),sin(h));float c=0.;for(int i=0;i<9;i++){a*=-1.5*1.5;a+=sin(a.yx/1.5)/1.5;c+=sin(a.x-a.y+c)+pow(abs(cos(a.y-a.x)),.9);}c=pow(c/10.,2.);e.rgb-=mix(-.3,1.,c)*.15;return e;}float s(float a,float b,float c){return abs(a)/sqrt(pow(b,2.)+pow(c,2.));}float r(float a,float b,float d,float h,bool e){float c=a*vTexCoord.x+b*vTexCoord.y+d;if(c*h>0.){return 1.;}else{float i=s(c,a,b);float g=uSize.x>uSize.y?uSize.x/uSize.y:uSize.y/uSize.x;float k=1./200.*(e?g:1.);return smoothstep(k,0.,i);}}vec4 x(vec4 c,float e){vec4 d=c;d=mix(c,uFC,e);if(d!=c){vec3 a=vec3(vTexCoord*uSize/uUL*.02,1.);float b=(1.*f(a)+1./2.*f(a*2.)+1./4.*f(a*4.)+1./8.*f(a*8.))/(1.+1./2.+1./4.+1./8.);b=pow(b,1.5);b=clamp(.5+20.*(b-.5),0.,1.);b=(b+f(a*2.)*2.)/3.;d.rgb-=vec3(1.,1.2,1.5)*b*.085;}return d;}vec4 y(vec4 h){vec4 d=h;float e=uFW/uSize.x;float g=uFW/uSize.y;float a=0.;vec3 b=vec3(vTexCoord*uSize/uUL*.1,1.);float i=(1.*f(b)+1./2.*f(b*2.)+1./4.*f(b*4.)+1./8.*f(b*8.))/(1.+1./2.+1./4.+1./8.)*2.-1.;float c=i*.01;if(d!=uFC){float k=-1.+g*1.+c;a=max(a,r(0.,1.,k,1.,uSize.x>uSize.y));}if(d!=uFC){float m=-1.+e*1.+c;a=max(a,r(1.,0.,m,1.,uSize.y>uSize.x));}if(d!=uFC){float n=-g*1.+c;float o=-1.;a=max(a,r(0.,1.,n,o,uSize.x>uSize.y));}if(d!=uFC){float p=-e*1.+c;float z=-1.;a=max(a,r(1.,0.,p,z,uSize.y>uSize.x));}d=x(h,a);return d;}void main(){vec4 b=texture2D(uImg,vTexCoord);vec4 a=b;if(uST){if(0==uTt){a=v(a);}else if(4==uTt){a=w(a);}}if(uSF){a=y(a);}gl_FragColor=a;}
`;class Utl{constructor(t,s){this.sM(t??"p2d"),this.sP(s),this.dgC=0}sP(t){let s,i,e,h,a,o;if("alba"===t){var u=window.alba.params.seed??window.alba._testSeed();let r=window.alba.prng(u);s=r(),i=r(),h=function(t,s){var i=r();return t*(1-i)+s*i},e=u,a=function(){window.alba.setComplete(!0),this.p("finished.")},o=function(t){window.alba.setMetadata(t)}}this.plf=t,this.rRF=h,this.hash=e,this.pvF=a,this.sFF=o,this.rseed=parseInt(1e4*(4e4+1e4*s)),this.nseed=parseInt(1e4*(4e4+1e4*i))}gHh(){return this.hash??"nohash"}sWH(t,s){this.width=t,this.height=s}gW(){return this.width??width}gH(){return this.height??height}rd(t,s,i){return this.dgC++,this.rRF(t??0,s??1)}p(){}cA(s){for(let t=0;t<s.length;t+=1)delete s[t];s.length=[]}sM(t){this.mode=t}iWG(){return"webgl"===this.mode}cPg(t,s,i){t=createGraphics(round(t),round(s),i);return t.colorMode(HSB),t.noStroke(),t}sS(t,s){this.sRS(t),this.sNS(s)}sRS(t){randomSeed(t||this.rseed)}sNS(t){noiseSeed(t||this.nseed)}gRS(){return this.rseed}rdS(){return 2*round(this.rd())-1}pO(t,s){var i=this.rd(),i=t[Math.floor(i*t.length)];return void 0!==s&&!0===s&&(s=t.indexOf(i),t.splice(s,1)),i}irr(t,s,i,r){for(this.dgC++,void 0===i&&(i=[]);;){var e=Math.floor(this.rd(t,s+1));if(!i.includes(e))return e}}rdG(t,s,i,r){t=randomGaussian(t,s);return this.clp(t,i=i||-1/0,r=r||1/0)}rdT(t){return this.rd()<t}gE(t,s){t=t??this.gW(),s=s??this.gH();var i={};return this.iWG()?(i.left=ut.r4(-t/2),i.right=ut.r4(t/2),i.top=ut.r4(-s/2),i.bottom=ut.r4(s/2)):(i.left=ut.r4((this.gW()-t)/2),i.right=ut.r4(t+(this.gW()-t)/2),i.top=ut.r4((this.gH()-s)/2),i.bottom=ut.r4(s+(this.gH()-s)/2)),i}iOP(t){return 0===this.r4(t.x)&&0===this.r4(t.y)}iOC(t,s,i,r){s=this.gE(s,i);return t.x<s.left||t.x>s.right||t.y<s.top||t.y>s.bottom}iSC(t,s){return t.toString("#rrggbb")===s.toString("#rrggbb")}iNB(t,s,i,r){var e=Math.min(s,i),s=Math.max(s,i);return r?e<=t&&t<=s:e<t&&t<s}calRMS(t){return sqrt(t.map(t=>sq(t)).reduce((t,s)=>t+s,0))}adA(t){for(;t<0;)t+=TWO_PI;for(;t>=TWO_PI;)t-=TWO_PI;return t}iAB(t,s,i){return t=this.adA(t),(s=this.adA(s))<(i=this.adA(i))?s<t&&t<i:s<t||t<i}iAI(t,s,i){var r=0<i?s+i:s;return this.iAB(t,s=0<i?s:s+i,r)}gUP(t){return new URLSearchParams(window.location.search).get(t)}pTC(t,s,i){return void 0===i?createVector(t*cos(s),t*sin(s)):createVector(t*cos(i)*cos(s),t*sin(i),t*cos(i)*sin(s))}cP(t,s,i,r){let e;return e=void 0===r?this.pTC(s,i):this.pTC(s,i,r),t.copy().add(e)}clp(t,s,i){return Math.min(Math.max(t,s),i)}iTE(){return"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}cTSC(t){return t="object"==typeof t?t:color(t),[max(.01,red(t)/t.maxes.rgb[0]),max(.01,green(t)/t.maxes.rgb[1]),max(.01,blue(t)/t.maxes.rgb[2]),max(.01,alpha(t)/t.maxes.rgb[3])]}cO(t){return JSON.parse(JSON.stringify(t))}r4(t){return round(t,10)}cTCI(t,s,i,r){t=p5.Vector.dist(t,i);return this.r4(s+r)>this.r4(t)}iITA(t,s,i,r,e,h,a){t=p5.Vector.sub(t,s),s=this.r4(t.mag());return!(s<=this.r4(i)||s>=this.r4(r))&&(i=atan2(this.r4(t.y),this.r4(t.x)),this.iAI(i,e,h))}iIR(t,s,i,r){t=p5.Vector.sub(t,s),i=p5.Vector.sub(i,s),r=p5.Vector.sub(r,s),s=this.r4(t.dot(i)),t=this.r4(t.dot(r));return 0<s&&s<i.dot(i)&&0<t&&t<r.dot(r)}iSAI(s,t,i,r,e,h){var a=lSCI(new LS(s.x,s.y,t.x,t.y),new Cc(i.x,i.y,r));if(0!==a.length){var o=p5.Vector.sub(t,s);for(let t=0;t<a.length;t+=1){var u=a[t],n=p5.Vector.sub(u,i),n=atan2(this.r4(n.y),this.r4(n.x));if(this.iAI(n,e,h)){n=p5.Vector.sub(u,s),u=this.r4(n.dot(o)),n=this.r4(o.dot(o));if(0<u&&u<n)return!0}}return!1}}iTSI(t,s,i,r,e){function h(t,s,i){return(ut.r4(i.y)-ut.r4(t.y))*(ut.r4(s.x)-ut.r4(t.x))>(ut.r4(s.y)-ut.r4(t.y))*(ut.r4(i.x)-ut.r4(t.x))}return h(t,i,r)!=h(s,i,r)&&h(t,s,i)!=h(t,s,r)}iROC(t,s,i,r,e,h,a){var e=this.gE(e,h),o=[[t,s],[s,i],[i,r],[r,t]],h=createVector(e.left,e.top),u=createVector(e.right,e.top),n=createVector(e.right,e.bottom),e=createVector(e.left,e.bottom);if(this.iIR(h,t,s,r)||this.iIR(u,t,s,r)||this.iIR(n,t,s,r)||this.iIR(e,t,s,r))return!1;if(!(this.iOC(t)||this.iOC(s)||this.iOC(i)||this.iOC(r)))return!1;var c=[[h,u],[u,n],[n,e],[e,h]];for(let s=0;s<o.length;s+=1)for(let t=0;t<c.length;t+=1)if(this.iTSI(...o[s],...c[t]))return!1;return!0}iASIC(t,s,i,r,e,h,a){var h=this.gE(h,a),a=createVector(h.left,h.top),o=createVector(h.right,h.top),u=createVector(h.right,h.bottom),h=createVector(h.left,h.bottom),n=this.cP(t,i,r),c=this.cP(t,s,r),l=this.cP(t,i,r+e),C=this.cP(t,s,r+e);return!!(this.iIR(n,a,o,h)||this.iIR(c,a,o,h)||this.iIR(l,a,o,h)||this.iIR(C,a,o,h)||this.iSAI(a,o,t,s,r,e)||this.iSAI(o,u,t,s,r,e)||this.iSAI(u,h,t,s,r,e)||this.iSAI(h,a,t,s,r,e)||this.iSAI(a,o,t,i,r,e)||this.iSAI(o,u,t,i,r,e)||this.iSAI(u,h,t,i,r,e)||this.iSAI(h,a,t,i,r,e)||this.iTSI(n,c,a,o)||this.iTSI(n,c,o,u)||this.iTSI(n,c,u,h)||this.iTSI(n,c,h,a)||this.iTSI(l,C,a,o)||this.iTSI(l,C,o,u)||this.iTSI(l,C,u,h)||this.iTSI(l,C,h,a)||this.iITA(a,t,s,i,r,e)||this.iITA(o,t,s,i,r,e)||this.iITA(u,t,s,i,r,e)||this.iITA(h,t,s,i,r,e))}}var EPS=1e-7;function Pt(t,s){return createVector(t,s)}function Cc(t,s,i){this.x=t,this.y=s,this.r=i}function LS(t,s,i,r){if(Math.sqrt((t-i)*(t-i)+(s-r)*(s-r))<EPS)throw"A point is not a line segment";this.x1=t,this.y1=s,this.x2=i,this.y2=r}function Ln(t,s,i){this.a=t,this.b=s,this.c=i,Math.abs(s)<EPS?(i/=t,t=1):(t=Math.abs(t)<EPS?0:t/s,i/=s)}function cLI(t,s){var i,r=s.a,e=s.b,s=s.c,h=t.x,a=t.y,t=t.r,o=r*r+e*e,u=2*r*e*a-2*r*s-2*e*e*h,n=u*u-4*o*(e*e*h*h+e*e*a*a-2*e*s*a+s*s-e*e*t*t);return Math.abs(e)<EPS?(i=s/r,Math.abs(h-i)>t?[]:Math.abs(i-t-h)<EPS||Math.abs(i+t-h)<EPS?[new Pt(i,a)]:(h=Math.abs(i-h),[new Pt(i,a+(t=Math.sqrt(t*t-h*h))),new Pt(i,a-t)])):Math.abs(n)<EPS?[new Pt(i=-u/(2*o),(s-r*i)/e)]:n<0?[]:(a=(s-r*(h=(-u-(n=Math.sqrt(n)))/(2*o)))/e,[new Pt(i=(-u+n)/(2*o),(s-r*i)/e),new Pt(h,a)])}function sTGF(t,s,i,r){return new Ln(s-r,i-t,i*s-t*r)}function pIR(t,s,i,r,e){var h=Math.min(s,r),s=Math.max(s,r),r=Math.min(i,e),i=Math.max(i,e);return h-EPS<=t.x&&t.x<=s+EPS&&r-EPS<=t.y&&t.y<=i+EPS}function lSCI(t,s){var i,r,e=t.x1,h=t.y1,a=t.x2,t=t.y2,s=cLI(s,sTGF(e,h,a,t));return 0===s.length?[]:(r=pIR(i=s[0],e,h,a,t),1===s.length?r?[i]:[]:(e=pIR(s=s[1],e,h,a,t),r&&e?[i,s]:r?[i]:e?[s]:[]))}class Ft{constructor(t){this.nm=t,this.opt={},this.pkd=null,this.rmF=function(){return ut.rd()}}aO(t,s,i,r){return this.opt[t]={text:t,value:s,rate:i,excludes:r??[]},this}pO(){if(null===this.pkd){var s=this.rd();if(void 0!==this.dbg)this.pkd=this.dbg;else{this.sVO(),this.aR();let t=0;for(var i in this.vOs)if(s<(t+=this.vOs[i].rate))return void(this.pkd=this.vOs[i])}}}sVO(){this.vOs=this.opt}aR(){let t=1;var s,i=[];for(s in this.vOs){var r=this.vOs[s].rate;void 0!==r&&0<=r?t-=r:i.push(s)}if(0!==i.length){var e,h=(t=Math.max(t,0))/i.length;for(e in i){var a=i[e];this.vOs[a].rate=h}}}rd(){return this.rmF()}gN(){return this.nm}gV(){return null===this.pkd&&this.pO(),this.pkd.value}gT(){return null===this.pkd&&this.pO(),this.pkd.text}}class FM{constructor(){this.fs={}}af(t){return this.fs[t.nm]=t,this}gFV(t){return this.fs[t].gV()}fmt(){var t,s={};for(t in this.fs){var i=this.fs[t];s[i.gN()]=i.gT()}return s}}ut=new Utl("webgl","alba"),fm=gfm(),ut.sFF(fm.fmt());
